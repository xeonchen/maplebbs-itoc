µo«H₪H: Filitov.bbs@bbs.twcat.edu.tw (₪@ֲI¥­ֳh) ¬×O: plan
¼׀  ֳD: Re: ֳצ©ף¥D¿ן³ז...
µo«H¯¸: «n₪k°|BBS (2004/02/06 Fri 22:34:59)               Updated: 2005/03/05

¡° ₪­z¡mdavidliu (David)¡n₪§»¨¥¡G
> ½׀°₪@₪UWindTop BBS¦b¥D¿ן³ז³£¦³₪@­׃(I)nfo¡i ®ױ₪÷₪½§i°ֿ ¡j×÷¥\¯א¡A
> ¸׃¥\¯א¥i¥H³sµ²¦¯¸₪W¬Y­׃¬×O¡A³sµ²×÷¬×O¦p¦³·s₪ו³¹®ֱֹ·|ֵ‎¥D¿ן³ז
> (I)nfo¡i ®ױ₪÷₪½§i°ֿ ¡jֵ¦¨(I)nfo¡i  ¦³·s₪½§i! ¡j¡A₪£×¾¹D¦p¦ףֵ‎
> Maple BBS itoc×©₪]¯א¥[₪J¦¹¥\¯א?

¥י WT §ן×k....

  [SomeBoard] ¦W÷¦©w¡A₪S [SomeBoard] ¥²¶·₪£¥i Zap (₪~·|ְx¦s¾\ֵ×°O¿‎)

: global.h

#define BN_ANNOUNCE     "0announce"     /* ₪½§i¬×O¡A±j­¢¾\ֵ× */
+ #define BN_INFO       "SomeBoard"     /* ®ױ₪÷₪½§i°ֿ */

: maple.p

+ int check_unread_by_name(char *bname);

: board.c: check_unread_by_name() ·s¼W¦¹¨ח¦¡©ף brd_force() ₪U­±

int
check_unread_by_name(bname)
  char *bname;
{
  int bno;
  BRD *brd;

  bno = brd_bno(bname);
  brd = bshm->bcache + bno;
#ifdef ENHANCED_VISIT
  brh_get(brd->bstamp, bno);
  return brh_unread(brd->blast);
#else
  return (brd->blast > brd_visit[bno]);
#endif
}

: menu.c ±N₪U­±³o¬q¥[¦b menu_main[] «e­±

#define INFO_EMPTY  "Info    ¡i ®ױ₪÷₪½§i°ֿ ¡j"
#define INFO_HAVE   "Info    ¡i ¦³·s₪½§i¡I ¡j"

static int
Information()
{
  int bno;

  if ((bno = brd_bno(BN_INFO)) >= 0)
  {
    XoPost(bno);
    xover(XZ_POST);
#ifndef ENHANCED_VISIT
    time(&brd_visit[bno]);
#endif
    return 0;
  }

  return XEASY;
}

: menu.c:check_unread() ·s¼W¦b menu() «e­±

static char *
check_unread(desc)
  char *desc;
{
  return strcmp(desc, INFO_EMPTY) ? desc :
    check_unread_by_name(BN_INFO) ? INFO_HAVE : INFO_EMPTY;
}

: menu.c:menu()

-         str = mptr->desc;
+         str = check_unread(mptr->desc);
          prints("(\033[1;36m%c\033[m)", *str++);
  ...

-         str = mptr->desc;
+         str = check_unread(mptr->desc);
          prints("  (\033[1;36m%c\033[m)", *str++);

  ...

-     str = mptr->desc;
+     str = check_unread(mptr->desc);
      prints(COLOR4 "> (%c)", *str++);

  ...

-     str = mptr->desc;
+     str = check_unread(mptr->desc);
      prints(COLOR4 "> (%c)", *str++);

: menu.c: static MENU menu_main[]

   ....
+ Information, 0, M_BOARD,
+ INFO_EMPTY,
   ....

--
[1;37mשששש  שששששששששששש[m  [1;32mOrigin:[35m [37m¥x«n₪k₪l§³N¾ַ°|[m [1;31m<bbs.twcat.edu.tw>[m
[41m  [1;31mשר  שרשרשרשר    שאשששג  שר[;41m  [40m  [1;36mAuthor: [35mFilitov [36mFrom: [35m¯¸°ָ¸s[m
[1;33m  [37mשה  ששהשוש¢₪ש‎שד  ש‎  שה [m  [1;33m ששששששששששששששששששששששששששששששששששששששששששששש‎[m
